
C++始于1982年，作为C语言的继承者，由丹麦计算机科学家Bjarne Stroustrup创建。1985年，《C++编程语言》第一版发布。C++的第一个标准于1998年发布，称为C++98。2003年，C++03发布，进行了一些小的更新。之后，C++的发展一度沉寂，但慢慢地开始积聚动力，最终在2011年有了重大更新，C++11。此后，C++标准委员会开始每三年发布一次更新版本，于是有了C++14、C++17、C++20，以及现在的C++23。随着C++23在2023年的发布，C++虽已年过四旬，但依旧强大。2023年的编程语言排名中，C++位于前四名，可应用在很多硬件上，从小型嵌入式微处理器的设备到多机架超级计算机。除了可观的硬件支持，C++还可以处理各种编程任务，无论是移动平台上的游戏、性能敏感的人工智能（AI）和机器学习（ML）软件、自动驾驶组件、实时3D图形引擎、底层硬件驱动、操作系统、网络设备的软件、网络浏览器等。C++程序在性能方面具有其他编程语言不可比拟的优势，因此成为了编写高效、强大和企业级程序的默认语言。像微软、Facebook、亚马逊、谷歌等大型科技公司都在使用用C++编写服务来运行他们的基础设施。尽管C++已经如此流行，但完全掌握这门语言还是很有难度。专业C++开发者使用的一些技巧，可能在传统教材中根本找不到，所以即便是资深C++开发者，也会有知识盲区。


很多时候，编程书籍更多地关注语法，而非实际应用。传统的C++教科书会在每一章中介绍语言的某个主要部分，解释语法并提供一个例子。但《Professional C++》不遵循这种模式，不会只介绍语言的基本知识和少量实践，而是会展示C++的实战用例。本书将展示一些鲜为人知的功能，可使读者们的编程更加轻松，同时还会向菜鸟与专业程序员展示不同的编程技巧。

\mySubsectionNoFile{}{适读人群}

即使已经使用C++语言多年，也可能不熟悉C++的一些更高级特性，或者没有充分利用该语言的所有功能，甚至还不知道最新版本C++23引入的新特性。或许已经能写出合格的C++代码，但想要了解更多关于设计和良好编程风格的内容。或者您是C++的新手，但希望一开始就了解“正确”的编程方式。这本书将满足这些需求，并将您的C++技能提升到专业水平。

本书会侧重于从C++的基本或中级知识提升到成为资深C++开发者，所以需要阅读本书的读者们已经具备一些基础C++编程知识和经验。

第1章，“C++和标准库速成课程”，涵盖了C++的基础知识作为复习，但并不能替代实际的编程训练。若是刚开始学习C++，但有C、Java、C\#等其他编程语言的经验，应该能够从第1章中获得学习后面章节所需的大部分知识。

无论如何，读者们都需要扎实的编程基础知识，应该了解循环、函数和变量。知道如何构建程序，并且应该熟悉递归等基本算法，对常见的数据结构（如队列）和一些有用的算法（如排序和搜索）也要有所了解。不过，不需要非常了解面向对象编程——这将在第5章“使用类进行设计”中详细介绍。

并且还需要熟悉将用于编译代码的编译器。后面将介绍两个编译器，Microsoft Visual C++和GCC。对于其他编译器，请参阅编译器提供的文档。

\mySubsectionNoFile{}{内容简介}

《Professional C++》采用的方法既可以提高代码质量，又可以提高编程效率。在第六版中，关于新C++23特性的讨论将贯穿全书。这些特性并不局限于几章或几节；并且，示例会在适当的时候使用新特性重新实现。

《Professional C++》不仅教授C++的语法和语言特性，还强调编程方法学、可重用的设计模式和良好的编程风格。《Professional C++》的方法学涵盖了整个软件开发过程，从设计和编写代码到调试和团队协作。这种方法将使您能够掌握C++语言及其特性，并利用其强大的功能进行大规模软件开发。

Imagine users who have learned all of the syntax of C++ without seeing a single example of its use. They know just enough to be dangerous! Without examples, they might assume that all code should go in the main() function of the program or that all variables should be global—practices that are generally not considered hallmarks of good programming.

Professional C++ programmers understand the correct way to use the language, in addition to the syntax. They recognize the importance of good design, the theories of object-oriented programming, and the best ways to use existing libraries. They have also developed an arsenal of useful code and reusable ideas.

By reading and understanding this book, you will become a professional C++ programmer. You will expand your knowledge of C++ to cover lesser known and often misunderstood language features. You will gain an appreciation for object-oriented design and acquire top-notch debugging skills. Perhaps most important, you will finish this book armed with a wealth of reusable ideas that you can actually apply to your daily work.

There are many good reasons to make the effort to be a professional C++ programmer as opposed to a programmer who knows C++. Understanding the true workings of the language will improve the quality of your code. Learning about different programming methodologies and processes will help you to work better with your team. Discovering reusable libraries and common design patterns will improve your daily efficiency and help you stop reinventing the wheel. All of these lessons will make you a better programmer and a more valuable employee. While this book can’t guarantee you a promotion, it certainly won’t hurt.

\mySubsectionNoFile{}{本书结构}

This book is made up of five parts.

Part I, “Introduction to Professional C++,” begins with a crash course in C++ basics to ensure a foundation of C++ knowledge. Following the crash course, Part I goes deeper into working with strings, because strings are used extensively in most examples throughout the book. The last chapter of Part I explores how to write readable C++ code.

Part II, “Professional C++ Software Design,” discusses C++ design methodologies. You will read about the importance of design, the object-oriented methodology, and the importance of code reuse.

Part III, “C++ Coding the Professional Way,” provides a technical tour of C++ from the professional point of view. You will read about the best ways to manage memory in C++, how to create reusable classes, and how to leverage important language features such as inheritance. You will also learn techniques for input and output, error handling, string localization, how to work with regular expressions, and how to structure your code in reusable components called modules. You will read about how to implement operator overloading, how to write templates, how to put restrictions on template parameters using concepts, and how to unlock the power of lambda expressions and function objects. This part also explains the C++ Standard Library, including containers, iterators, ranges, and algorithms. You will also read about some additional libraries that are available in the standard, such as the libraries to work with time, dates, time zones, random numbers, and the filesystem.

Part IV, “Mastering Advanced Features of C++,” demonstrates how you can get the most out of C++. This part of the book exposes the mysteries of C++ and describes how to use some of its more advanced features. You will read about how to customize and extend the C++ Standard Library to your needs, advanced details on template programming, including template metaprogramming, and how to use multithreading to take advantage of multiprocessor and multicore systems.

Part V, “C++ Software Engineering,” focuses on writing enterprise-quality software. You’ll read about the engineering practices being used by programming organizations today; how to write efficient C++ code; software testing concepts, such as unit testing and regression testing; techniques used to debug C++ programs; how to incorporate design techniques, frameworks, and conceptual object-oriented design patterns into your own code; and solutions for cross-language and cross-platform code.

The book concludes with a useful chapter-by-chapter guide to succeeding in a C++ technical interview, an annotated bibliography, a summary of the C++ header files available in the standard, and a brief introduction to the Unified Modeling Language (UML).

This book is not a reference of every single class, member function, and function available in C++. The book C++17 Standard Library Quick Reference by Peter Van Weert and Marc Gregoire (Apress, 2019. ISBN: 978-1-4842-4923-9) is a condensed reference to all essential data structures, algorithms, and functions provided by the C++ Standard Library up until the C++17 standard(At the time of this writing, an updated edition called C++23 Standard Library Quick Reference is being worked on, which is a similar condensed reference but includes all C++20 and C++23 features.). Appendix B, “Annotated Bibliography,” lists a couple more references. Two excellent online references are:

\begin{itemize}
\item
\url{cppreference.com}: You can use this reference online or download an offline version for use when you are not connected to the Internet.

\item
\url{cplusplus.com/reference}
\end{itemize}

When I refer to a “Standard Library Reference” in this book, I am referring to one of these detailed C++ references.

The following are additional excellent online resources:

\begin{itemize}
\item
\url{github.com/isocpp/CppCoreGuidelines}: The C++ Core Guidelines are a collaborative effort led by Bjarne Stroustrup, inventor of the C++ language itself. They are the result of many person-years of discussion and design across a number of organizations. The aim of the guidelines is to help people to use modern C++ effectively. The guidelines are focused on relatively higher-level issues, such as interfaces, resource management, memory management, and concurrency.

\item
\url{github.com/Microsoft/GSL}: This is an implementation by Microsoft of the Guidelines Support Library (GSL) containing functions and types that are suggested for use by the C++ Core Guidelines. It’s a header-only library.

\item
\url{isocpp.org/faq}: This is a large collection of frequently asked C++ questions.

\item
\url{stackoverflow.com}: Search for answers to common programming questions—or ask your own questions.
\end{itemize}

\mySubsectionNoFile{}{惯例}

\CXXTwentythreeLogo{-40}{-40}

讨论C++23标准的段落或部分，会在左侧有一个的C++23小图标，就像这段话一样。而C++11、C++14、C++17和C++20的特性则没有标记。


\mySubsectionNoFile{}{What You Need to Use This Book}

All you need to use this book is a computer with a C++ compiler. This book focuses only on parts of C++ that have been standardized, and not on vendor-specific compiler extensions.

\mySubsubsection{}{Any C++ Compiler}

You can use whichever C++ compiler you like. If you don’t have a C++ compiler yet, you can download one for free. There are a lot of choices. For example, for Windows, you can download Microsoft Visual Studio Community Edition, which is free and includes Visual C++. For Linux, you can use GCC or Clang, which are also free.

The following two sections briefly explain how to use Visual C++ and GCC. Refer to the documentation that came with your compiler for more details.

\begin{myTip}{Compilers and C++23 feature support}
This book discusses new features introduced with the C++23 standard. At the time of this writing, no compilers were fully C++23-compliant yet. Some new features were only supported by some compilers and not others, while other features were not yet supported by any compiler. Compiler vendors are hard at work to catch up with all new features, and I’m sure it won’t take long before there will be full C++23-compliant compilers available. You can keep track of which compiler supports which features at \url{en.cppreference.com/w/cpp/compiler_support}.
\end{myTip}

\begin{myTip}{Compilers and C++ module support}
At the time of this writing, not all compilers fully support modules yet; though all major compilers do, at least partially. This book uses modules everywhere. If your compiler does not yet support modules, you can convert modularized code to non-modularized code, as explained briefly in Chapter 11, “Modules, Header Files, and Miscellaneous Topics.”
\end{myTip}

\mySubsubsection{}{Example: Microsoft Visual C++ 2022}

First, you need to create a project. Start Visual C++ 2022, and on the welcome screen, click the Create A New Project button. If the welcome screen is not shown, select File -> New -> Project. In the Create A New Project dialog, search for the Console App project template with tags C++, Windows, and Console, and click Next. Specify a name for the project and a location where to save it and click Create.

Once your new project is loaded, you can see a list of project files in the Solution Explorer. If this docking window is not visible, select View -> Solution Explorer. A newly created project will contain a file called <projectname>.cpp under the Source Files section in the Solution Explorer. You can start writing your C++ code in that .cpp file, or if you want to compile source code files from the downloadable source archive for this book, select the <projectname>.cpp file in the Solution Explorer and delete it. You can add new files or existing files to a project by right-clicking the project name in the Solution Explorer and then selecting Add -> New Item or Add -> Existing Item.

At the time of this writing, Visual C++ 2022 does not yet automatically enable C++23 features. To enable C++23 features, in the Solution Explorer window, right-click your project and click Properties. In the Properties window, go to Configuration Properties ➪ General, set the C++ Language Standard option to ISO C++23 Standard or Preview - Features from the Latest C++ Working Draft, whichever is available in your version of Visual C++, and click OK.

Finally, select Build -> Build Solution to compile your code. When it compiles without errors, you can run it with Debug -> Start Debugging.

\begin{myNotic}{NOTE}
Microsoft Visual C++ has full support for modules, including the C++23 standard named module std.
\end{myNotic}

\mySubsubsection{}{Example: GCC}

You can create your source code files with any text editor you prefer and save them to a directory. To compile your code, open a terminal and run the following command, specifying all your .cpp files that you want to compile:

\begin{shell}
g++ -std=c++2b -o <executable_name> <source1.cpp> [source2.cpp ...]
\end{shell}

The -std=c++2b option is required to tell GCC to enable C++23 features. This option will change to -std=C++23 once GCC is fully C++23-compliant.

\mySamllsection{Module Support}

Support for modules in GCC is enabled with the -fmodules-ts option.

At the time of this writing, GCC does not yet support the C++23 standard named module std, introduced in Chapter 1. To make such code compile, you have to replace import std; declarations with import declarations of individual Standard Library headers. Once that is done, import declarations of Standard Library headers, such as the following, require you to precompile them:

\begin{cpp}
import <iostream>;
\end{cpp}

Here is an example of precompiling <iostream>:

\begin{shell}
g++ -std=c++2b -fmodules-ts -xc++-system-header iostream
\end{shell}

As an example, the AirlineTicket code from Chapter 1 uses modules. To compile it with GCC, first replace the use of std::println() with std::cout as GCC does not yet support <print> functionality at the time of this writing. After that, replace the import std; declarations with the appropriate import declarations, <string> and <iostream> for this example. You can find the adapted code in the Examples\verb|\|Ch00\verb|\|AirlineTicket directory in the downloadable source code archive.

Then, compile the two standard headers <iostream> and <string>:

\begin{shell}
g++ -std=c++2b -fmodules-ts -xc++-system-header iostream
g++ -std=c++2b -fmodules-ts -xc++-system-header string
\end{shell}

Compile the module interface file:

\begin{shell}
g++ -std=c++2b -fmodules-ts -c -x c++ AirlineTicket.cppm
\end{shell}

Finally, compile the application itself:

\begin{shell}
g++ -std=c++2b -fmodules-ts -o AirlineTicket AirlineTicket.cpp AirlineTicketTest.cpp AirlineTicket.o
\end{shell}

When it compiles without errors, you can run it as follows:

\begin{shell}
./AirlineTicket
\end{shell}

\begin{myNotic}{Note}
The process of compiling C++ code using C++ modules with GCC might change in the future. Also, support for the C++23 standard named module std will be added. In that case, please consult the GCC documentation for an updated procedure on how to compile such code.
\end{myNotic}

\mySamllsection{C++23's Support for Printing Ranges}

Chapter 2, “Working with Strings and String Views,” explains that you can easily print the entire contents of Standard Library containers, such as std::vector, to the screen. This is a new feature since C++23 and not all compilers support this yet at the time of this writing.

As an example, Chapter 2 explains that you can write the contents of an std::vector as follows.
Don’t worry if you don’t understand all the syntax yet, you will at the end of Chapter 2.

\begin{cpp}
std::vector values { 11, 22, 33 };
std::print("{:n}", values);
\end{cpp}

This outputs:

\begin{shell}
11, 22, 33
\end{shell}

If your compiler does not yet support this C++23 feature to print the contents of a container using std::print(), then you can convert the second line of code to the following:

\begin{cpp}
for (const auto& value : values) { std::cout << value << ", "; }
\end{cpp}

This outputs:

\begin{shell}
11, 22, 33
\end{shell}

Again, don’t worry if you don’t understand the syntax yet. All will be clear at the end of Chapter 2.

\mySubsectionNoFile{}{Reader Support for This Book}

The following sections describe different options to get support for this book.

\mySubsubsection{}{Companion Download Files}

As you work through the examples in this book, you may choose either to type in all the code manually or to use the source code files that accompany the book. However, I suggest you type in all the code manually because it greatly benefits the learning process and your memory. All of the source code used in this book is available for download at \url{www.wiley.com/go/proc++6e} or from GitHub at \url{github.com/Professional-CPP/edition-6}.

\begin{myNotic}{Note}
Because many books have similar titles, you may find it easiest to search by ISBN; for this book, the ISBN is 978-1-394-19317-2.
\end{myNotic}

Once you’ve downloaded the code, just decompress it with your favorite decompression tool.

\mySubsubsection{}{How to Contact the Publisher}

If you believe you’ve found a mistake in this book, please bring it to our attention. At John Wiley \& Sons, we understand how important it is to provide our customers with accurate content, but even with our best efforts an error may occur.

To submit your possible errata, please e-mail it to our Customer Service Team at wileysupport@wiley.com with “Possible Book Errata Submission” as a subject line.

\mySubsubsection{}{How to Contact the Author}

If you have any questions while reading this book, the author can easily be reached at \url{marc.gregoire@nuonsoft.com} and will try to get back to you in a timely manner.